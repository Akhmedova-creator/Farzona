<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link th:href="@{/styles/css/users.css}" rel="stylesheet" />
    <script type="text/javascript" th:src="@{/js/cookies.js}"></script>
</head>
<body th:style="'background: url(/images/users.png) no-repeat center center fixed;  background-size: cover; color: red; '">
<div><button id="btnMenu"><img id ="searchIm" src="/images/mainBtn.png" alt="Иконка" width="40" height="40"></button>
</div>
<div> <ul id="navbar" th:style=" 'color: red;   font-weight: bold; '">
    <li><a id ="link" href="/mems">Сообщения</a></li>
</ul>
</div>
<table id="searchTb">
    <thead>
    <tr border="0"></tr>
    <th> <div>Выберите пол</div><div>
        <select id="selectFem">
            <option value="nullJob">все</option>
            <option value="nullJob">женский</option>
            <option value="nullJob">жужской</option>
        </select>
    </div>
    </th>
    <th><div>Выберите профессию</div><div>
        <select id="selectJob">
            <option value="nullJob">все</option>
            <option value="agent">агент</option>
            <option value="agent real estate">агент по недвижимости</option>
            <option value="actor">актер</option>
            <option value="animator">аниматор</option>
            <option value="architect">архитектор</option>
            <option value="bartender">бармен</option>
            <option value="unemployed">безработный</option>
            <option value="librarian">библиотекарь</option>
            <option value="businessman">бизнесмен</option>
            <option value="accountant">бухгалтер</option>
            <option value="veterinarian">ветеринар</option>
            <option value="driver">водитель</option>
            <option value="military">военный</option>
            <option value="educator">воспитатель</option>
            <option value="doctor">врач</option>
            <option value="geologist">геолог</option>
            <option value="graphicDesigner">графический дизайнер</option>
            <option value="janitor">дворник</option>
            <option value="diplomat">дипломат</option>
            <option value="housekeeper">домработник</option>
            <option value="journalist">журналист</option>
            <option value="engineer">инженер</option>
            <option value="mason">каменщик</option>
            <option value="composer">композитор</option>
            <option value="cosmetologist">косметолог</option>
            <option value="pilot">летчик</option>
            <option value="masterOfDecorativeWorks">мастер декоративных работ</option>
            <option value="machinist">машинист</option>
            <option value="nurse">медсестра</option>
            <option value="manager">менеджер</option>
            <option value="microbiologist">микробиолог</option>
            <option value="hairdresser">парикмахер</option>
            <option value="translator">переводчик</option>
            <option value="polygraphist">полиграфист</option>
            <option value="policeman">полицейский</option>
            <option value="policeman">предприниматель</option>
            <option value="conductor">проводник</option>
            <option value="conductor">программист</option>
            <option value="salesman">продавец</option>
            <option value="beekeeper">пчеловод</option>
            <option value="restorer">реставратор</option>
            <option value="secretary">секретарь</option>
            <option value="locksmith">слесарь</option>
            <option value="specialist in hospitality">специалист по гостепримству</option>
            <option value="carpenter">столярстоляр</option>
            <option value="builder">строитель</option>
            <option value="student">студент</option>
            <option value="dancer">танцовщик</option>
            <option value="turner">токарь</option>
            <option value="cleaner">уборщик</option>
            <option value="teacher">учитель</option>
            <option value="artist">художник</option>
            <option value="florist">цветовод</option>
            <option value="navigator">штурман</option>
            <option value="ecologist">эколог</option>
            <option value="economist">экономист</option>
            <option value="electrician">электрик</option>
            <option value="jeweler">ювелир</option>
            <option value="lawyer">юрист</option>
        </select>
    </div></th>
    <th>
        <div>Выберите национальность</div><div>
        <select id="selectNationality">
            <option value="nullNat">все</option>
            <option value="abazin">абазинская</option>
            <option value="abkhazian">абхазская</option>
            <option value="avar">аварская</option>
            <option value="abacnone">агулская</option>
            <option value="adjar">аджарская</option>
            <option value="adyghe">адыгейская</option>
            <option value="azerbaijani">азербайджанская</option>
            <option value="aleutian">алеутская</option>
            <option value="altaic">алтайская</option>
            <option value="аmerican">американская</option>
            <option value="аndean">андийская</option>
            <option value="arab">арабская</option>
            <option value="armenian">армянская</option>
            <option value="archin">арчинская</option>
            <option value="assyrian">ассирийская</option>
            <option value="astrakhan">астраханская</option>
            <option value="afghan">афганская</option>
            <option value="ahvakh">ахвахская</option>
            <option value="bagulal">багулалская</option>
            <option value="balkarian">балкарская</option>
            <option value="bangladeshi">бангладешская</option>
            <option value="bashkir">башкирская</option>
            <option value="bezhtinskaya">бежтинская</option>
            <option value="belorussian">белорусcкая</option>
            <option value="besermyanskaya">бесермянская</option>
            <option value="bulgarian">болгарская</option>
            <option value="bosnian">боснийская</option>
            <option value="botlikh">ботлихская</option>
            <option value="british">британская</option>
            <option value="buryat">бурятская</option>
            <option value="hungarian">венгерская</option>
            <option value="vep">вепская</option>
            <option value="vietnamese">вьетнамская</option>
            <option value="gagauz">гагаузская</option>
            <option value="godoberinsky">годоберинская</option>
            <option value="greek">греческая</option>
            <option value="georgian">грузинская</option>
            <option value="gunib">гунибская</option>
            <option value="dargin">даргинская</option>
            <option value="didoy">дидойская</option>
            <option value="dolgan">долганская</option>
            <option value="dungan">дунганская</option>
            <option value="jewish">еврейская</option>
            <option value="yezidi">езидская</option>
            <option value="izhora">ижорская</option>
            <option value="ingiloy">ингилойская</option>
            <option value="ingush">ингушская</option>
            <option value="indian">индийская</option>
            <option value="spanish">испанская</option>
            <option value="italian">итальянская</option>
            <option value="kabardian">кабардинская</option>
            <option value="kazakh">казакская</option>
            <option value="kazakh">казахская</option>
            <option value="kaitai">кайтайская</option>
            <option value="kalmyk">калмыкская</option>
            <option value="kamchadal">камчадалская</option>
            <option value="karagash">карагашская</option>
            <option value="karaite">караимская</option>
            <option value="karakalpak">каракалпакская</option>
            <option value="karatinsky">каратинская</option>
            <option value="karachay">карачаевская</option>
            <option value="karelian">карелская</option>
            <option value="kerek">керекская</option>
            <option value="ket">кетская</option>
            <option value="kyrgyz">киргизская</option>
            <option value="сhinese">китайская</option>
            <option value="kom">комская</option>
            <option value="kom">комская</option>
            <option value="korean">корейская</option>
            <option value="koryakskaya">корякская</option>
            <option value="krymchak">крымчакская</option>
            <option value="kryashenskaya">кряшенская</option>
            <option value="Kubachinskaya">кубачинская</option>
            <option value="сuban">кубинская</option>
            <option value="сuban">кумандинская</option>
            <option value="kumyk">кумыкская</option>
            <option value="kurdish">курдская</option>
            <option value="kurman">курманская</option>
            <option value="kurman">курманская</option>
            <option value="lazskaya">лазская</option>
            <option value="lak">лакская</option>
            <option value="lankan">ланкийская</option>
            <option value="latgalian">латгальская</option>
            <option value="latvian">латышская</option>
            <option value="lezgian">лезгинская</option>
            <option value="lithuanian">литовская</option>
            <option value="macedonian">македонская</option>
            <option value="megrel">мегрелская</option>
            <option value="mennonite">меннонитская</option>
            <option value="mishar">мишарская</option>
            <option value="moldavian">молдаванская</option>
            <option value="mongol">монголская</option>
            <option value="mordovian">мордовийская</option>
            <option value="nagaibak">нагайбакская</option>
            <option value="nanai">нанайская</option>
            <option value="nganasan">нганасанская</option>
            <option value="negidal">негидалская</option>
            <option value="german">немецкая</option>
            <option value="nenets">ненская</option>
            <option value="nivkh">нивхская</option>
            <option value="nogai">ногайская</option>
            <option value="oroch">орочская</option>
            <option value="ossetian">осетинская</option>
            <option value="pakistani">пакистанская</option>
            <option value="pamir">памирская</option>
            <option value="persian">перская</option>
            <option value="polish">полякская</option>
            <option value="pomeranian">поморская</option>
            <option value="romanian">румынская</option>
            <option value="rusyn">русинская</option>
            <option value="russian">русская</option>
            <option value="rutul">рутульская</option>
            <option value="sami">саамская</option>
            <option value="svan">сванская</option>
            <option value="selkup">селькупская</option>
            <option value="serbian">сербская</option>
            <option value="setuska">сетуская</option>
            <option value="slovak">словакская</option>
            <option value="soyot">сойотская</option>
            <option value="tabasaran">табасаранская</option>
            <option value="tajik">таджикская</option>
            <option value="taz">тазская</option>
            <option value="talysh">талышская</option>
            <option value="tant">тантская</option>
            <option value="tatar">татарская</option>
            <option value="tatskaya">татская</option>
            <option value="telengitskaya">теленгитская</option>
            <option value="teleut">телеутская</option>
            <option value="tindal">тиндалская</option>
            <option value="todzhinskaya">тоджинская</option>
            <option value="todzhinskaya">тоджинская</option>
            <option value="tofalar">тофаларская</option>
            <option value="tubalar">тубаларская</option>
            <option value="tuvan">тувинская</option>
            <option value="turkmen">туркменская</option>
            <option value="turkmen">туркская</option>
            <option value="udin">удинская</option>
            <option value="udmurt">удмуртская</option>
            <option value="udege">удэгейская</option>
            <option value="uzbek">узбекская</option>
            <option value="uyghur">уйгурская</option>
            <option value="ukrainian">украинская</option>
            <option value="ult">ултская</option>
            <option value="ulch">ульчская</option>
            <option value="finnish">финская</option>
            <option value="french">французская</option>
            <option value="khakas">хакаская</option>
            <option value="khvarshinskaya">хваршинская</option>
            <option value="khemshil">хемшилская</option>
            <option value="tsakhur">цахурская</option>
            <option value="tsakhur">цахурская</option>
            <option value="gypsy">цыганская</option>
            <option value="chamalal">чамалалская</option>
            <option value="chelkal">челканская</option>
            <option value="circassian">черкеская</option>
            <option value="circassian">черкеская</option>
            <option value="сircassian">черкесогайская</option>
            <option value="montenegrin">черногорская</option>
            <option value="czech">чешская</option>
            <option value="chechen">чеченская</option>
            <option value="chuvan">чуванская</option>
            <option value="сhuvash">чувашская</option>
            <option value="сhuvash">чувашская</option>
            <option value="chukchi">чукотская</option>
            <option value="chulym">чулымская</option>
            <option value="shapsug">шапсугская</option>
            <option value="shore">шорская</option>
            <option value="evenk">эвенкская</option>
            <option value="evenEskimo">эскимоская</option>
            <option value="estonian">эстонская</option>
            <option value="yukaghir">юкагирская</option>
            <option value="yakut">якутская</option>
            <option value="japanese">японская</option>
        </select>
    </div>
    </th>
    <th>
        <div>Выберите город</div><div>
        <select id="selectTown">
            <option value="nullTown">все</option>
            <option value="moscow">Москва</option>
            <option value="saint-petersburg">Санкт-Петербург</option>
            <option value="novosibirsk">Новосибирск</option>
            <option value="ekaterinburg">Екатеринбург</option>
            <option value="kazan">Казань</option>
            <option value="nizhniyNovgorod">Нижний Новгород</option>
            <option value="chelyabinsk">Челябинск</option>
            <option value="krasnoyarsk">Красноярск</option>
            <option value="samara">Самара</option>
            <option value="ufa">Уфа</option>
            <option value="rostovOnDon">Ростов-на-Дону</option>
            <option value="omsk">Омск</option>
            <option value="krasnodar">Краснодар</option>
            <option value="voronezh">Воронеж</option>
            <option value="perm">Пермь</option>
            <option value="perm">Пермь</option>
            <option value="volgograd">Волгоград</option>
            <option value="saratov">Саратов</option>
            <option value="tyumen">Тюмень</option>
            <option value="togliatti">Тольятти</option>
            <option value="barnaul">Барнаул</option>
            <option value="izhevsk">Ижевск</option>
            <option value="makhachkala">Махачкала</option>
            <option value="khabarovsk">Хабаровск</option>
            <option value="ulyanovsk">Ульяновск</option>
            <option value="irkutsk">Иркутск</option>
            <option value="vladivostok">Владивостокк</option>
            <option value="yaroslavl">Ярославль</option>
            <option value="irkutsk">Иркутск</option>
            <option value="kemerovo">Кемерово</option>
            <option value="tomsk">Томск</option>
            <option value="naberezhnyeChelny">Набережные Челны</option>
            <option value="sevastopol">Севастополь</option>
            <option value="stavropol">Ставрополь</option>
            <option value="orenburg">Оренбург</option>
            <option value="orenburg">Оренбург</option>
            <option value="novokuznetsk">Новокузнецк</option>
            <option value="ryazan">Рязань</option>
            <option value="balashikha">Балашиха</option>
            <option value="penza">Пенза</option>
            <option value="balashikha">Балашиха</option>
            <option value="cheboksary">Чебоксары</option>
            <option value="lipetsk">Липецк</option>
            <option value="kaliningrad">Калининград</option>
            <option value="astrakhan">Астрахань</option>
            <option value="kaliningrad">Калининград</option>
            <option value="tula">Тула</option>
            <option value="kirov">Киров</option>
            <option value="sochi">Сочи</option>
            <option value="kursk">Курск</option>
            <option value="ulanUde">Улан-Удэ</option>
            <option value="tver">Тверь</option>
            <option value="magnitogorsk">Магнитогорск</option>
            <option value="surgut">Сургут</option>
            <option value="bryansk">Брянск</option>
            <option value="ivanovo">Иваново</option>
            <option value="yakutsk">Якутск</option>
            <option value="vladimir">Владимир</option>
            <option value="simferopol">Симферополь</option>
            <option value="belgorod">Белгород</option>
            <option value="nizhnyTagil">Нижний Тагил</option>
            <option value="kaluga">Калуга</option>
            <option value="cheat">Чита</option>
            <option value="grozny">Грозный</option>
            <option value="volzhsky">Волжский</option>
            <option value="smolensk">Смоленск</option>
            <option value="podolsk">Подольск</option>
            <option value="saransk">Саранск</option>
            <option value="vologda">Вологда</option>
            <option value="kurgan">Курган</option>
            <option value="cherepovets">Череповец</option>
            <option value="eagle">Орёл</option>
            <option value="arkhangelsk">Архангельск</option>
            <option value="vladikavkaz">Владикавказ</option>
            <option value="nizhnevartovsk">Нижневартовск</option>
            <option value="yoshkarOla">Йошкар-Ола</option>
            <option value="sterlitamak">Стерлитамак</option>
            <option value="murmansk">Мурманск</option>
            <option value="kostroma">Кострома</option>
            <option value="novorossiysk">Новороссийск</option>
            <option value="tambov">Тамбов</option>
            <option value="khimki">Химки</option>
            <option value="mytishchi">Мытищи</option>
            <option value="nalchik">Нальчик</option>
            <option value="taganrog">Таганрог</option>
            <option value="nizhnekamsk">Нижнекамск</option>
            <option value="blagoveshchensk">Благовещенск</option>
            <option value="komsomolskOnAmur">Комсомольск-на-Амуре</option>
            <option value="petrozavodsk">Петрозаводск</option>
            <option value="korolev">Королёв</option>
            <option value="mines">Шахты</option>
            <option value="engels">Энгельс</option>
            <option value="velikyNovgorod">Великий Новгород</option>
            <option value="lyubertsy">Люберцы</option>
            <option value="bratsk">Братск</option>
            <option value="staryOskol">Старый Оскол</option>
            <option value="angarsk">Ангарск</option>
            <option value="syktyvkar">Сыктывкар</option>
            <option value="dzerzhinsk">Дзержинск</option>
            <option value="pskov">Псков</option>
            <option value="krasnogorsk">Красногорск</option>
            <option value="armavir">Армавир</option>
            <option value="abakan">Абакан</option>
            <option value="balakovo">Балаково</option>
            <option value="biysk">Бийск</option>
            <option value="yuzhnoSakhalinsk">Южно-Сахалинск</option>
            <option value="odintsovo">Одинцово</option>
            <option value="ussuriysk">Уссурийск</option>
            <option value="prokopyevsk">Прокопьевск</option>
            <option value="rybinsk">Рыбинск</option>
            <option value="norilsk">Норильск</option>
            <option value="volgodonsk">Волгодонск</option>
            <option value="syzran">Сызрань</option>
            <option value="petropavlovskKamchatsky">Петропавловск-Камчатский</option>
            <option value="kamenskUralsky">Каменск-Уральский</option>
            <option value="novocherkassk">Новочеркасск</option>
            <option value="almetyevsk">Альметьевск</option>
            <option value="zlatoust">Златоуст</option>
            <option value="severodvinsk">Северодвинск</option>
            <option value="khasavyurt">Хасавюрт</option>
            <option value="kerch">Керчь</option>
            <option value="domodedovo">Домодедово</option>
            <option value="salavat">Салават</option>
            <option value="miass">Миасс</option>
            <option value="kopeysk">Копейск</option>
            <option value="pyatigorsk">Пятигорск</option>
            <option value="electrostal">Электросталь</option>
            <option value="maykop">Майкоп</option>
            <option value="finding">Находка</option>
            <option value="berezniki">Березники</option>
            <option value="kolomna">Коломна</option>
            <option value="shchelkovo">Щёлково</option>
            <option value="serpukhov">Серпухов</option>
            <option value="carpets">Ковров</option>
            <option value="neftekamsk">Нефтекамск</option>
            <option value="kislovodsk">Кисловодск</option>
            <option value="bataysk">Батайск</option>
            <option value="rubtsovsk">Рубцовск</option>
            <option value="obninsk">Обнинск</option>
            <option value="kyzyl">Кызыл</option>
            <option value="derbent">Дербент</option>
            <option value="nefteyugansk">Нефтеюганск</option>
            <option value="nazran">Назрань</option>
            <option value="kaspiysk">Каспийск</option>
            <option value="dolgoprudny">Долгопрудный</option>
            <option value="novocheboksarsk">Новочебоксарск</option>
            <option value="novomoskovsk">Новомосковск</option>
            <option value="essentuki">Ессентуки</option>
            <option value="nevinnomyssk">Невинномысск</option>
            <option value="october">Октябрьский</option>
            <option value="ramenskoe">Раменское</option>
            <option value="pervouralsk">Первоуральск</option>
            <option value="mikhailovsk">Михайловск</option>
            <option value="reutov">Реутов</option>
            <option value="cherkessk">Черкесск</option>
            <option value="zhukovsky">Жуковский</option>
            <option value="dimitrovgrad">Димитровград</option>
            <option value="pushkino">Пушкино</option>
            <option value="artem">Артём</option>
            <option value="kamyshin">Камышин</option>
            <option value="evpatoria">Евпатория</option>
            <option value="murom">Муром</option>
            <option value="khantyMansiysk">Ханты-Мансийск</option>
            <option value="novyUrengoy">Новый Уренгой</option>
            <option value="seversk">Северск</option>
            <option value="orekhovoZuyevo">Орехово-Зуево</option>
            <option value="arzamas">Арзамас</option>
            <option value="noginsk">Ногинск</option>
            <option value="novoshakhtinsk">Новошахтинск</option>
            <option value="berdsk">Бердск</option>
            <option value="eista">Элиста</option>
            <option value="sergievPosad">Сергиев Посад</option>
            <option value="prominent">Видное</option>
            <option value="achinsk">Ачинск</option>
            <option value="tobolsk">Тобольск</option>
            <option value="noyabrsk">Ноябрьск</option>
        </select>
    </div>
    </th>
    <th><label > </label>
        <button id="btnUsers" th:style="'height:40px;width:100px'" type="submit" >Поиск</button>
    </th>
    </tr>
    </thead>
</table>

<table  id = "usersTb" class="users">
    <thead>
    <tr border="0"></tr>
    <th></th>
    <th></th>
    </tr>
    </thead>
    <tbody>
    </tbody>
</table>

<script>
    $(function () {
        $.get('getUsers').done(function (users) {
            users.forEach(function (user) {
                if ((user.login===$.cookie('user'))&&(user.password===$.cookie('pass') )){
                    console.log("same values");
                }

                else
                {
                var image="/images/"+user.photoName
                $('tbody').append(`
                    <tr>
                        <td> <img src = ${image} width="220" height="220"  /></td>
                         <td>
<div  style="color: red;">
<p >логин: ${user.login}</p>
<p>пол: ${user.isWoman}</p>
<p>возраст: ${user.age}</p>
<p>профессия: ${user.job}</p>
<p>национальность: ${user.national}</p>
<p>город: ${user.town}</p>
<p> <a href="/chat/${user.id}/${user.login}">Написать сообщение</a> </p>
</div>
</td>
 </tr>
                `)
            }});
        })
    });




    $(function () {
        $('#btnUsers').click( function(){
            $('tbody tr').remove();
            document.createElement('tbody');
            var fame =$('#selectFem option:selected').html()
            var job =$('#selectJob option:selected').html()
            var national = $('#selectNationality option:selected').html()
            var town = $('#selectTown option:selected').html()
            $.get("/getUsersWithFiltr", {fame: fame , job: job, nationality: national, town: town}).done(function (users) {

                users.forEach(function (user) {
                    if ((user.login===$.cookie('user'))&&(user.password===$.cookie('pass') )){
                        console.log("same values");
                    }

                    else
                    {
                    var image="/images/"+user.photoName
                    $('tbody').append(`
                    <tr>
                        <td> <img src = ${image} width="220" height="220"  /></td>
                         <td>
<div  style="color: red;">
<p >логин: ${user.login}</p>
<p>пол: ${user.isWoman}</p>
<p>возраст: ${user.age}</p>
<p>профессия: ${user.job}</p>
<p>национальность: ${user.national}</p>
<p>город: ${user.town}</p>
<p> <a href="/chat/${user.id}/${user.login}">Написать сообщение</a> </p>
</div>
</td>
                    </tr>
                `)
                }});
            })

        })});


    $(window).on("error", function(evt) {

        console.log("jQuery error event:", evt);
        var e = evt.originalEvent; // get the javascript event
        console.log("original event:", e);
        if (e.message) {
            alert(e.message);
        } else {
            alert("Error:\n\t" + e.type + "\nElement:\n\t" + (e.srcElement || e.target));
        }
    });

</script>
<script>
    var countClick =0;
    $(function () {
        $('#btnMenu').click( function() {
                countClick = countClick+1;
                if(countClick%2===0) {
                    $('#navbar').hide();
                    $('#searchTb').css('top', 80 + 'px');
                    $('#usersTb').css('top', 120 + 'px');
                }
                else {
                    $('#navbar').show();
                        $.get("/getOneUser", {login: $.cookie('user'), pass: $.cookie('pass')}).done(function (user) {
                            $.get("/messages/count",{recipientId : user.id }).done(function (count) {
                                if(count>0){
                                $('#link').text('Сообщения ('+count+')');
                                }
                        });
                    });

                    $('#searchTb').css('top', 140 + 'px');
                    $('#usersTb').css('top', 170 + 'px');
                }
            }
        )});

</script>
</body>
</html>
